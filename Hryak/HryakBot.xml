<context>

    <sample>
        <item value="ÐšÑ‚Ð¾ Ñ‚Ð°ÐºÐ°Ñ ÐÐ»Ð¸ÑÐ°"/>
        <item value="Ð§Ñ‚Ð¾ Ñ‚Ð°ÐºÐ¾Ðµ Ð±Ð¾Ñ‚"/>
    </sample>

    <input pattern="*{ (Ñ…Ñ€ÑÐº|Ð²ÑÐµ*|Ð¿Ð¸Ð´Ð¾Ñ€*|Ð¿ÐµÐ´Ð¸Ðº*|ÑÑƒÐº*|ÑÑƒÑ‡Ðº*|Ñ‡Ð¼Ð¾*|ÑÐ²Ð¸Ð½*) [,|.] (Ð¿Ñ€Ð¸Ð²ÐµÑ‚*|Ð·Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹*|Ð·Ð´Ð¾Ñ€Ð¾Ð²*|Ð·Ð´Ð°Ñ€Ð¾Ð²*|Ð´Ñ€Ð°Ñ‚ÑƒÐ¹*|Ð´Ð°Ñ€Ð¾Ð²*|Ð´Ð¾Ñ€Ð¾Ð²*|ÑÐ°Ð»Ð°Ð¼|Ñ…ÑÐ¹|Ñ…Ð¾Ð¹|Ñ…Ð°Ð¹|ðŸ‘‹|ðŸ–) }*">
        <output if="full($UserName)">
            <item value="ÐŸÑ€Ð¸Ð²ÐµÑ‚, $UserName! Ð Ð°Ð´ ÑÐ½Ð¾Ð²Ð° Ð²Ð¸Ð´ÐµÑ‚ÑŒ Ñ‚ÐµÐ±Ñ!"/>
            <item value="Ð—Ð´Ñ€Ð°Ð²ÑÑ‚Ð²ÑƒÐ¹, $UserName! Ð¯ ÑƒÐ¶Ðµ ÑƒÑÐ¿ÐµÐ» ÑÐ¾ÑÐºÑƒÑ‡Ð¸Ñ‚ÑŒÑÑ..."/>
        </output>

        <context if="empty($UserName)" id="name">
            <output value="ÐŸÑ€Ð¸Ð²ÐµÑ‚! ÐœÐµÐ½Ñ Ð·Ð¾Ð²ÑƒÑ‚ ÐÐ»Ð¸ÑÐ°! Ð ÑÑ‚Ð¾ - Ð´ÐµÐ¼Ð¾Ð½ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ Ð¼Ð¾ÐµÐ³Ð¾ Ð½Ð°Ð²Ñ‹ÐºÐ°, ÑÐ¾Ð·Ð´Ð°Ð½Ð½Ð¾Ð³Ð¾ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Ð¿Ð»Ð°Ñ‚Ñ„Ð¾Ñ€Ð¼Ñ‹ zenbot. ÐšÐ°Ðº Ñ‚ÐµÐ±Ñ Ð·Ð¾Ð²ÑƒÑ‚?"/>

            <input pattern="$Text">
                <var name="UserName" value="cap($Text)" scope="user"/>
                <var name="UserNamf" value="javascript: $UserNamn" scope="user"/>
                <output value="ÐŸÑ€Ð¸ÑÑ‚Ð½Ð¾ Ð¿Ð¾Ð·Ð½Ð°ÐºÐ¾Ð¼Ð¸Ñ‚ÑŒÑÑ, $UserNamf! ÐÐ°Ð¿Ð¸ÑˆÐ¸ Ð¼Ð½Ðµ Ñ‡Ñ‚Ð¾-Ð½Ð¸Ð±ÑƒÐ´ÑŒ."/>
                <context/>
            </input>
        </context>
    </input>

    <input pattern="* Ð¿Ð¾ÐºÐ° *">
        <var name="end_session" value="javascript: true"/>
        <output value="ÐÑƒ Ð¿Ð¾ÐºÐ°, Ð½ÐµÐ·Ð½Ð°ÐºÐ¾Ð¼ÐµÑ†!" if="empty($UserName)"/>
        <output value="ÐŸÐ¾ÐºÐ°-Ð¿Ð¾ÐºÐ°, $UserName!"/>
    </input>

    <input pattern="[* (ÐºÑ‚Ð¾|Ñ‡Ñ‚Ð¾) Ñ‚Ð°Ðº*] $Text">
        <context id="name" if="empty($UserName)"/>

        <context id="wiki" if="full($UserName)">
            <get url="http://ru.wikipedia.org/w/api.php" var="Wiki">
                <param name="format" value="xml"/>
                <param name="action" value="opensearch"/>
                <param name="search" value="$Text"/>
            </get>

            <var name="Items" value="javascript: $Wiki['SearchSuggestion']['Section']['Item']" if="full($Wiki)" scope="context"/>
            <var name="Result" value="javascript: $Items[Math.floor(Math.random() * $Items.length)]['Description']['content']" if="full($Items)"/>

            <output if="empty($Result)">
                <item value='Ð¯ Ð¿Ð¾Ð¸ÑÐºÐ°Ð»Ð° Ð² Ð²Ð¸ÐºÐ¸Ð¿ÐµÐ´Ð¸Ð¸, Ð½Ð¾ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð½Ð°ÑˆÐ»Ð° Ð¿Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÑƒ "$Text"'/>
                <item value="Ð’ Ð²Ð¸ÐºÐ¸Ð¿ÐµÐ´Ð¸Ð¸ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð½Ð°ÑˆÐ»Ð¾ÑÑŒ..."/>
            </output>

            <output value="$Result" if="full($Result)"/>

            <input pattern="* (ÐµÑ‰Ðµ|Ð´Ñ€ÑƒÐ³Ð¾Ð¹ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚) *"/>

            <sample value="Ð”Ñ€ÑƒÐ³Ð¾Ð¹ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚"/>
        </context>


    </input>

</context>
